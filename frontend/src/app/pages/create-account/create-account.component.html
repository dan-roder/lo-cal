
<div class="login-wrapper">
  <div class="login-container center-740">
    <h1 class="text-center">Create an Account</h1>
    <div class="account-success" *ngIf="accountSuccess">
      <h2 class="text-center">Success!</h2>
      <p class="text-center">Your account has been created. Keep an eye out for an email from us with your login information. Please return to the <a routerLink="/login">login</a> page to proceed.</p>
    </div>
    <div class="form-errors text-left" *ngIf="existingAccount">
      <p>It looks like an account with that email already exists. Log in <a routerLink="/login">here</a></p>
    </div>
    <div [hidden]="!processing || accountSuccess" class="loading-gif"></div>
    <form action="" [formGroup]="accountForm" class="lo-cal-form create-account-form" *ngIf="!accountSuccess" [ngClass]="{'processing': processing}" [@slideUp]="processing">
      <div class="form-section half-and-half">
        <div class="form-component form-component-text">
          <label for="first-name" class="visuallyhidden">First Name</label>
          <input type="text" name="first-name" id="first-name" formControlName="first-name" placeholder="First Name*" [ngClass]="{'has-error':!accountForm.controls['first-name'].valid && submittedOnce}">
          <div class="error-message" *ngIf="!accountForm.controls['first-name'].valid && submittedOnce">This field is required.</div>
        </div>
        <div class="form-component form-component-text">
          <label for="last-name" class="visuallyhidden">Last Name</label>
          <input type="text" name="last-name" id="last-name" formControlName="last-name" placeholder="Last Name*" [ngClass]="{'has-error':!accountForm.controls['last-name'].valid && submittedOnce}">
          <div class="error-message" *ngIf="!accountForm.controls['last-name'].valid && submittedOnce">This field is required.</div>
        </div>
      </div>
      <div class="form-component form-component-email">
        <label for="email" class="visuallyhidden">Email</label>
        <input type="text" name="email" id="email" formControlName="email" placeholder="Email*" [ngClass]="{'has-error':!accountForm.controls['email'].valid && submittedOnce}">
        <div class="error-message" *ngIf="!accountForm.controls['email'].valid && submittedOnce">This field is required.</div>
      </div>
      <div class="form-component form-component-text">
        <label for="password" class="visuallyhidden">Password</label>
        <input type="password" name="password" id="password" formControlName="password" placeholder="Password* (8 or more characters)" [ngClass]="{'has-error':!accountForm.controls['password'].valid && submittedOnce}">
        <div class="error-message" *ngIf="!accountForm.controls['password'].valid && submittedOnce">This field is required.</div>
        <div class="error-message" *ngIf="accountForm.controls['password'].value.length > 2 && accountForm.controls['password'].errors?.minlength">Password must be at least 8 characters.</div>
      </div>
      <div class="form-component form-component-text">
        <label for="confirm-password" class="visuallyhidden">Confirm Password</label>
        <input type="password" name="confirm-password" id="confirm-password" formControlName="confirm-password" placeholder="Confirm Password*" [ngClass]="{'has-error':!accountForm.controls['confirm-password'].valid && submittedOnce}">
        <div class="error-message" *ngIf="!accountForm.controls['confirm-password'].valid && submittedOnce">This field is required.</div>
        <div class="error-message" *ngIf="accountForm.controls['confirm-password'].errors?.MatchPassword">Password does not match.</div>
      </div>
      <div class="form-component form-component-text">
        <label for="security-question" class="visuallyhidden">Security Question</label>
        <input type="text" name="security-question" id="security-question" formControlName="security-question" placeholder="Security Question*" [ngClass]="{'has-error':!accountForm.controls['security-question'].valid && submittedOnce}">
        <div class="error-message" *ngIf="!accountForm.controls['security-question'].valid && submittedOnce">This field is required.</div>
      </div>
      <div class="form-component form-component-text">
        <label for="security-answer" class="visuallyhidden">Security Answer</label>
        <input type="text" name="confirm-password" id="security-answer" formControlName="security-answer" placeholder="Security Answer*" [ngClass]="{'has-error':!accountForm.controls['security-answer'].valid && submittedOnce}">
        <div class="error-message" *ngIf="!accountForm.controls['security-answer'].valid && submittedOnce">This field is required.</div>
      </div>
      <div class="control-wrapper" formGroupName="full-address">
        <div class="form-component form-component-text">
          <label for="address" class="visuallyhidden">Address</label>
          <input type="text" name="address" id="address" formControlName="address" placeholder="Address*" [ngClass]="{'has-error':!accountForm.controls['full-address']['controls']['address'].valid && submittedOnce}">
          <div class="error-message" *ngIf="!accountForm.controls['full-address']['controls']['address'].valid && submittedOnce">This field is required.</div>
        </div>
        <div class="form-component form-component-text">
          <label for="address2" class="visuallyhidden">Address 2</label>
          <input type="text" name="address2" id="address2" formControlName="address2" placeholder="Apartment/Suite/Unit/Building (optional)">
        </div>
        <div class="form-section thirds">
          <div class="form-component form-component-text">
            <label for="city" class="visuallyhidden">City</label>
            <input type="text" name="city" id="city" formControlName="city" placeholder="City*" [ngClass]="{'has-error':!accountForm.controls['full-address']['controls']['city'].valid && submittedOnce}">
            <div class="error-message" *ngIf="!accountForm.controls['full-address']['controls']['city'].valid && submittedOnce">This field is required.</div>
          </div>
          <div class="form-component form-component-select">
            <label for="state" class="visuallyhidden">State</label>
            <select name="state" id="state" formControlName="state" [ngClass]="{'has-error':!accountForm.controls['full-address']['controls']['state'].valid && submittedOnce}">
              <option value="" selected="selected">-- Select --</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="DC">District Of Columbia</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
            </select>
          </div>
          <div class="form-component form-component-text">
            <label for="zip" class="visuallyhidden">Zip Code</label>
            <input type="text" name="zip" id="zip" formControlName="zip" placeholder="Zip*" [ngClass]="{'has-error':!accountForm.controls['full-address']['controls']['zip'].valid && submittedOnce}">
            <div class="error-message" *ngIf="!accountForm.controls['full-address']['controls']['zip'].valid && submittedOnce">This field is required.</div>
            <div class="error-message" *ngIf="accountForm.controls['full-address']['controls']['zip'].errors?.pattern && accountForm.controls['full-address']['controls']['zip'].value.length > 5">Zip code must be only 5 digits.</div>
          </div>
        </div>
      </div>

      <div class="submit red-button full-width-button">
        <input type="submit" value="Create Account" (click)="submitForm(accountForm)" [disabled]="processing || !accountForm.valid">
      </div>
      <div class="account-actions">
        <div class="action">
          <a routerLink="/login">Already have an account? Sign In.</a>
        </div>
        <div class="action">
          <a routerLink="/password-reset">Forgot Password</a>
        </div>
      </div>
    </form>
  </div>
</div>